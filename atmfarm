-- Use existing getgenv().fps if set, otherwise default to 60
getgenv().fps = getgenv().fps or 60
print("FPS set to: ", getgenv().fps)

local function controlFPS()
    local RunService = game:GetService("RunService")
    while true do
        local t0 = tick()
        RunService.Heartbeat:Wait()
        repeat until (t0 + 1/getgenv().fps) < tick()
    end
end

spawn(controlFPS)

-- Use existing getgenv().codes if set, otherwise default to internal values
getgenv().codes = getgenv().codes or {
    "CODE1",
    "CODE2"
}
print("Codes set to: ", table.concat(getgenv().codes, ", "))

-- Redeem promo codes
local function handleRedeemCommand(code)
    local args = {
        [1] = "EnterPromoCode",
        [2] = code
    }
    print("Redeeming code: ", code)  -- Debug print to confirm which code is being redeemed
    game:GetService("ReplicatedStorage"):WaitForChild("MainEvent"):FireServer(unpack(args))
end

-- If getgenv().codes is set, use those codes; otherwise, use default internal values
if getgenv().codes then
    for _, code in ipairs(getgenv().codes) do
        handleRedeemCommand(code)
    end
else
    -- Default behavior if getgenv().codes is not set
    for _, code in ipairs({
        "CODE1",
        "CODE2"
    }) do
        handleRedeemCommand(code)
    end
end
