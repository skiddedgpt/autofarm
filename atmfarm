-- Use existing getgenv().fps if set, otherwise default to 60
getgenv().fps = getgenv().fps or 60

local function controlFPS()
    local RunService = game:GetService("RunService")
    while true do
        local t0 = tick()
        RunService.Heartbeat:Wait()
        repeat until (t0 + 1/getgenv().fps) < tick()
    end
end

spawn(controlFPS)

-- Use existing getgenv().codes if set, otherwise default to internal values
getgenv().codes = getgenv().codes or {
    "CODE1",
    "CODE2"
}

local function handleRedeemCommand(code)
    local args = {
        [1] = "EnterPromoCode",
        [2] = code
    }
    game:GetService("ReplicatedStorage"):WaitForChild("MainEvent"):FireServer(unpack(args))
end

for _, code in ipairs(getgenv().codes) do
    handleRedeemCommand(code)
end
